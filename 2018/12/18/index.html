<!doctype html><html lang=zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>UFW 防火墙常用设置 - Hello World</title><meta name=author content="Shell Ming"><meta name=description content="A blog about everything."><meta name=generator content="Hugo 0.52"><link rel=stylesheet href=/assets/css/external.min.css media=screen><link rel=stylesheet href=/assets/css/styles.css media=screen><link href="//fonts.googleapis.com/css?family=Roboto:400" rel=stylesheet><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/img/apple-touch-icon.png><link rel="shortcut icon" href=/assets/img/favicon.ico><link href=/posts/index.xml rel=alternate type=application/rss+xml title="Hello World"><link href=/posts/index.xml rel=feed type=application/rss+xml title="Hello World"><meta property=og:title content="UFW 防火墙常用设置"><meta property=og:description content="安装与卸载 直接执行命令 ufw 查看 ufw 是否安装，如果没有安装执行 sudo apt-get install ufw 安装 ufw，如果需要卸载使用 sudo apt-get install ufw 命令。
启用 IPv6 如果服务器启用了 IPv6，需要开启 ufw 的 IPv6 支持。编辑文件 /etc/default/ufw，确保 IPv6 的值为 yes。 &gt; &hellip; &gt; IPV6=yes &gt; &hellip;
设置默认策略 一般默认策略为允许所有传出请求，拒绝所有传入请求，配置如下：
sudo ufw default deny incoming sudo ufw default allow outgoing  具体规则配置 按服务名配置 sudo ufw allow ssh # 允许 ssh 连接 sudo ufw allow ssh/tcp # 增加了协议  按端口配置 sudo ufw deny 22 sudo ufw deny 22/tcp  拒绝某个 IP 段对某个端口的访问 如果本机地址为 192."><meta property=og:type content=article><meta property=og:url content=https://shellming.github.io/2018/12/18/><meta property=article:published_time content=2018-12-18T00:00:00&#43;00:00><meta property=article:modified_time content=2018-12-18T00:00:00&#43;00:00><meta itemprop=name content="UFW 防火墙常用设置"><meta itemprop=description content="安装与卸载 直接执行命令 ufw 查看 ufw 是否安装，如果没有安装执行 sudo apt-get install ufw 安装 ufw，如果需要卸载使用 sudo apt-get install ufw 命令。
启用 IPv6 如果服务器启用了 IPv6，需要开启 ufw 的 IPv6 支持。编辑文件 /etc/default/ufw，确保 IPv6 的值为 yes。 &gt; &hellip; &gt; IPV6=yes &gt; &hellip;
设置默认策略 一般默认策略为允许所有传出请求，拒绝所有传入请求，配置如下：
sudo ufw default deny incoming sudo ufw default allow outgoing  具体规则配置 按服务名配置 sudo ufw allow ssh # 允许 ssh 连接 sudo ufw allow ssh/tcp # 增加了协议  按端口配置 sudo ufw deny 22 sudo ufw deny 22/tcp  拒绝某个 IP 段对某个端口的访问 如果本机地址为 192."><meta itemprop=datePublished content=2018-12-18T00:00:00&#43;00:00><meta itemprop=dateModified content=2018-12-18T00:00:00&#43;00:00><meta itemprop=wordCount content=105><meta itemprop=keywords content=ufs,防火墙,DoS,安全,><meta name=twitter:card content=summary><meta name=twitter:title content="UFW 防火墙常用设置"><meta name=twitter:description content="安装与卸载 直接执行命令 ufw 查看 ufw 是否安装，如果没有安装执行 sudo apt-get install ufw 安装 ufw，如果需要卸载使用 sudo apt-get install ufw 命令。
启用 IPv6 如果服务器启用了 IPv6，需要开启 ufw 的 IPv6 支持。编辑文件 /etc/default/ufw，确保 IPv6 的值为 yes。 &gt; &hellip; &gt; IPV6=yes &gt; &hellip;
设置默认策略 一般默认策略为允许所有传出请求，拒绝所有传入请求，配置如下：
sudo ufw default deny incoming sudo ufw default allow outgoing  具体规则配置 按服务名配置 sudo ufw allow ssh # 允许 ssh 连接 sudo ufw allow ssh/tcp # 增加了协议  按端口配置 sudo ufw deny 22 sudo ufw deny 22/tcp  拒绝某个 IP 段对某个端口的访问 如果本机地址为 192."></head><body><nav><a href=/>Shell Ming</a></nav><main class=container><article><header><small><time datetime="2018-12-18 12:00">2018-12-18</time>
&bull;
<a href=/categories/linux>LINUX</a></small><h1>UFW 防火墙常用设置</h1></header><section><h4 id=安装与卸载>安装与卸载</h4><p>直接执行命令 <code>ufw</code> 查看 ufw 是否安装，如果没有安装执行 <code>sudo apt-get install ufw</code> 安装 ufw，如果需要卸载使用 <code>sudo apt-get install ufw</code> 命令。</p><h4 id=启用-ipv6>启用 IPv6</h4><p>如果服务器启用了 IPv6，需要开启 ufw 的 IPv6 支持。编辑文件 <code>/etc/default/ufw</code>，确保 <code>IPv6</code> 的值为 <code>yes</code>。
&gt; &hellip;
&gt; IPV6=yes
&gt; &hellip;</p><h4 id=设置默认策略>设置默认策略</h4><p>一般默认策略为允许所有传出请求，拒绝所有传入请求，配置如下：</p><pre><code>sudo ufw default deny incoming
sudo ufw default allow outgoing
</code></pre><h4 id=具体规则配置>具体规则配置</h4><h5 id=按服务名配置>按服务名配置</h5><pre><code>sudo ufw allow ssh # 允许 ssh 连接
sudo ufw allow ssh/tcp # 增加了协议
</code></pre><h5 id=按端口配置>按端口配置</h5><pre><code>sudo ufw deny 22
sudo ufw deny 22/tcp
</code></pre><h5 id=拒绝某个-ip-段对某个端口的访问>拒绝某个 IP 段对某个端口的访问</h5><p>如果本机地址为 192.168.2.101，想要拒绝 192.168.2.100 这个 c 段对本机 25 端口的请求，执行如下命令：</p><pre><code>sudo ufw deny from 192.168.2.100/8 to 192.168.2.101 port 25
</code></pre><h5 id=limit-的使用>limit 的使用</h5><p>如果想要防止 80 端口的拒绝服务攻击，可以通过限制请求数来实现，命令如下：</p><pre><code>sudo ufw limit 80/tcp
</code></pre><p>默认情况下每 30s 请求数超过6次，接下来的请求将会被 block</p></section><footer><hr><div class=meta><p class=tags><a href=/tags/ufs><span>#</span>ufs</a>
<a href=/tags/%E9%98%B2%E7%81%AB%E5%A2%99><span>#</span>防火墙</a>
<a href=/tags/dos><span>#</span>DoS</a>
<a href=/tags/%E5%AE%89%E5%85%A8><span>#</span>安全</a></p></div><hr><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"test"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></main><footer><p>&copy; 2018 Shell Ming. <a href=http://creativecommons.org/licenses/by-sa/4.0/>Some Rights Reserved</a>.</p><p>Powered by <a href=https://gohugo.io title="A Fast and Flexible Website Generator">Hugo</a> &amp; <a href=https://github.com/eshlox/simplicity title="Hugo theme">Simplicity</a>.</p></footer><script src=/assets/js/scripts.min.js></script></body></html>